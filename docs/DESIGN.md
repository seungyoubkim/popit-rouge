# Pop It Rouge - 게임 기획서 (프로토타입)

## 1. 게임 개요

Pop It + 로그라이크 덱빌딩 모바일 게임.
팝잇 보드에서 버블을 터치(팝)하여 점수를 획득하고, 라운드 클리어 후 덱빌딩(쇼핑)을 통해 버블을 강화하며 진행하는 게임.
참고작: 발라트로, 집주인이너무해

## 2. 게임 흐름

```
[홈화면] → 게임시작 → [로비] → 라운드시작 → [라운드 플레이]
                                                    ↓
                                              승리 → [쇼핑] → [로비] → 다음 라운드...
                                              패배 → [홈화면]

10라운드 승리 시 → [게임 승리 화면] → [홈화면]
```

## 3. 화면 구성

### 3.1 홈화면
- 게임 타이틀 표시
- "게임 시작" 버튼

### 3.2 로비
- 현재 보유 버블 목록 표시 (색상별 개수)
- 현재 라운드 번호 표시
- "라운드 시작" 버튼

### 3.3 라운드 플레이
- 5x5 팝잇 게임판
- 타이머 (30초)
- 현재 점수 / 목표 점수
- 콤보 표시 (레인보우 콤보 / 모노컬러 콤보)

### 3.4 라운드 결과
- 승리: 축하 연출 → 쇼핑으로 이동
- 패배: 게임 오버 연출 → 홈화면으로 이동

### 3.5 쇼핑
- 3가지 선택지 카드 노출
- 선택지 하나를 고르면 덱에 반영 후 로비로 이동

### 3.6 게임 승리 화면
- 10라운드 클리어 축하 연출
- 홈화면으로 이동 버튼

## 4. 핵심 메카닉

### 4.1 용어 정의
| 용어 | 설명 |
|------|------|
| **팝(Pop)** | 활성화된 버블을 터치하여 누르는 행위 |
| **리필(Refill)** | 보드에 내 버블들이 랜덤 위치에 활성화되는 것 |
| **턴(Turn)** | 리필 → 모든 버블 팝 → 다음 리필까지의 한 사이클 |

### 4.2 버블 시스템

#### 초기 덱
- 빨강 버블 x1
- 파랑 버블 x1
- 노랑 버블 x1
- **총 3개**

#### 버블 색상
| 색상 | 코드명 | 기본 점수 |
|------|--------|-----------|
| 빨강 | red | 10 |
| 파랑 | blue | 10 |
| 노랑 | yellow | 10 |
| 무지개 | rainbow | 10 (특수: 무조건 이전 콤보+1) |

#### 리필 규칙
- 보유 버블 수 ≤ 25: 모든 버블이 25칸 중 랜덤 위치에 활성화
- 보유 버블 수 > 25: 보유 버블 중 25개를 랜덤 선택하여 모든 칸에 활성화
- 각 버블은 색상 정보를 가지고 활성화됨

### 4.3 콤보 시스템

#### 레인보우 콤보
- 이전에 팝한 버블과 **다른 색상**의 버블을 팝하면 발동
- 콤보 1회당 추가 점수: **+5점**
- 연속으로 다른 색을 팝할수록 콤보 누적 (1, 2, 3, ...)

#### 모노컬러 콤보
- 이전에 팝한 버블과 **같은 색상**의 버블을 팝하면 발동
- 콤보 1회당 추가 점수: **+10점**
- 연속으로 같은 색을 팝할수록 콤보 누적 (1, 2, 3, ...)

#### 콤보 전환 규칙
- 레인보우 콤보 진행 중 같은 색을 팝 → 레인보우 콤보 리셋, 모노컬러 콤보 1부터 시작
- 모노컬러 콤보 진행 중 다른 색을 팝 → 모노컬러 콤보 리셋, 레인보우 콤보 1부터 시작
- 무지개 버블: 무조건 현재 콤보 +1 (콤보 종류 유지)

#### 점수 계산 (버블 1회 팝 시)
```
획득 점수 = 기본 점수 + (콤보 수 × 콤보 보너스)
```

### 4.4 라운드 시스템

#### 라운드 규칙
- 제한 시간: 30초
- 목표 점수 달성 시 승리, 미달성 시 패배
- 패배 → 게임 종료 (홈화면)
- 10라운드 클리어 → 게임 승리

#### 라운드별 목표 점수 (프로토타입)
| 라운드 | 목표 점수 |
|--------|-----------|
| 1 | 50 |
| 2 | 80 |
| 3 | 120 |
| 4 | 180 |
| 5 | 250 |
| 6 | 350 |
| 7 | 500 |
| 8 | 700 |
| 9 | 950 |
| 10 | 1300 |

### 4.5 쇼핑 시스템

라운드 승리 후 3가지 선택지가 노출됨. 1가지를 선택하여 덱을 빌딩함.

#### 선택지 풀 (프로토타입)
| ID | 이름 | 효과 | 설명 |
|----|------|------|------|
| add_red | 빨강 버블 추가 | 덱에 빨강 버블 +1 | "빨강 버블을 1개 추가합니다" |
| add_blue | 파랑 버블 추가 | 덱에 파랑 버블 +1 | "파랑 버블을 1개 추가합니다" |
| add_yellow | 노랑 버블 추가 | 덱에 노랑 버블 +1 | "노랑 버블을 1개 추가합니다" |
| remove_red | 빨강 버블 삭제 | 덱에서 빨강 버블 -1 | "빨강 버블을 1개 삭제합니다" |
| remove_blue | 파랑 버블 삭제 | 덱에서 파랑 버블 -1 | "파랑 버블을 1개 삭제합니다" |
| remove_yellow | 노랑 버블 삭제 | 덱에서 노랑 버블 -1 | "노랑 버블을 1개 삭제합니다" |
| add_rainbow | 무지개 버블 추가 | 덱에 무지개 버블 +1 | "무지개 버블을 1개 추가합니다" |

#### 선택지 노출 규칙
- 매 쇼핑마다 전체 풀에서 랜덤 3개 선택 (중복 없음)
- 삭제 선택지는 해당 색상 버블이 1개 이상 있을 때만 풀에 포함

## 5. 기술 스펙

### 5.1 엔진
- LÖVE 2D (Lua)

### 5.2 화면
- 반응형 레이아웃 (실제 화면 크기 기반 동적 계산)
- 세로 모바일 기준

### 5.3 파일 구조 (예정)
```
main.lua          -- 엔트리포인트, 화면 전환 관리
conf.lua          -- LÖVE 설정
src/
  scenes/
    home.lua      -- 홈화면
    lobby.lua     -- 로비
    round.lua     -- 라운드 플레이
    shop.lua      -- 쇼핑
    result.lua    -- 라운드 결과 (승리/패배)
    victory.lua   -- 게임 승리
  game_state.lua  -- 전역 게임 상태 (덱, 라운드, 점수 등)
  bubble.lua      -- 버블 데이터 및 로직
  combo.lua       -- 콤보 시스템
  board.lua       -- 5x5 보드 로직 (리필, 팝 판정)
  ui.lua          -- 공통 UI 컴포넌트 (버튼 등)
assets/
  fonts/          -- Pretendard 폰트
```

## 6. 프로토타입 범위

### 포함
- [x] 홈화면 (게임 시작 버튼)
- [x] 로비 (보유 버블 표시, 라운드 시작)
- [x] 라운드 플레이 (5x5 보드, 타이머, 점수, 콤보)
- [x] 라운드 결과 (승리/패배)
- [x] 쇼핑 (3가지 선택지)
- [x] 게임 승리 화면 (10라운드 클리어)
- [x] 기본 7가지 쇼핑 선택지

### 미포함 (추후 개발)
- 사운드/효과음
- 세이브/로드
- 추가 버블 종류
- 추가 쇼핑 선택지
- 유물/아티팩트 시스템
- 난이도 선택
